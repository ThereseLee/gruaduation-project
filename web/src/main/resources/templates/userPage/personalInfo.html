<!DOCTYPE html>
<!-- saved from url=(0052)http://getbootstrap.com/docs/4.0/examples/dashboard/ -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">
	<title>个人信息</title>
	<link href="asserts/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/4.0.0/css/bootstrap.css}" rel="stylesheet">
	<link href="asserts/css/bootstrap.min.css" th:href="@{/asserts/css/bootstrap.min.css}" rel="stylesheet">
	<link href="asserts/css/dashboard.css" th:href="@{/asserts/css/dashboard.css}" rel="stylesheet">
	<!-- Icons CSS-->
	<link href="asserts/css/icons.css" th:href="@{/asserts/css/icons.css}" rel="stylesheet">
	<!-- animate CSS-->
	<link href="asserts/css/animate.css"th:href="@{/asserts/css/animate.css}" rel="stylesheet" >
	<!-- Sidebar CSS-->
	<link href="asserts/css/sidebar-menu.css" th:href="@{/asserts/css/sidebar-menu.css}" rel="stylesheet"/>
	<!-- Custom Style-->
	<link href="asserts/css/app-style.css" th:href="@{/asserts/css/app-style.css}" rel="stylesheet"/>
	<!--favicon-->
	<link rel="icon" href="asserts/img/favicon.ico" th:href="@{/asserts/img/favicon.ico}" type="image/x-icon">
	<!-- simplebar CSS-->
	<link href="asserts/css/simplebar.css" th:href="@{/asserts/css/simplebar.css}" rel="stylesheet"/>
	<style type="text/css">
		body{
			background-color: #f6f9fc;
			font-family: 'Roboto', sans-serif;
			font-size: 14px;
			color: rgba(0, 0, 0, 0.72);
			letter-spacing: .5px
		}
		.content-wrapper {
			margin-left: 220px;
			padding-top: 70px;
			padding-left: 35px;
			padding-right: 10px;
			padding-bottom: 70px;
			overflow-x: hidden;
			-webkit-transition: all 0.3s ease;
			-moz-transition: all 0.3s ease;
			-o-transition: all 0.3s ease;
			transition: all 0.3s ease;
		}
		.profile-card-2 .card-img-block{
			float:left;
			width:100%;
			height:150px;
			overflow:hidden;
		}
		.profile-card-2 .card-body{
			position:relative;
		}
		.profile-card-2 .profile {
			border-radius: 50%;
			position: absolute;
			top: -42px;
			left: 15%;
			max-width: 75px;
			border: 3px solid rgba(255, 255, 255, 1);
			-webkit-transform: translate(-50%, 0%);
			transform: translate(-50%, 0%);
		}
		.profile-card-2 h5{
			font-weight:600;
		}
		.profile-card-2 .card-text{
			font-weight:300;
			font-size:15px;
		}
		.profile-card-2 .icon-block{
			float:left;
			width:100%;
		}
		.profile-card-2 .icon-block a{
			text-decoration:none;
		}
		.profile-card-2 i {
			display: inline-block;
			text-align: center;
			width: 30px;
			height: 30px;
			line-height: 30px;
			border-radius: 50%;
			margin:0 5px;
		}
		.shadow-facebook{
			box-shadow: 0 7px 30px rgba(59, 89, 152, 0.82);
		}
		.bg-facebook {
			background-color: #3b5998!important;
		}
		.nav-tabs {
			border-bottom: 0px solid #ffffff;
			border-radius: 0.25rem;
		}
		.nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
			color: #ffffff;
			background-color: rgba(255, 255, 255, 0.15);
			border-color: #dee2e6 #dee2e6 #fff;
		}
		.nav-tabs .nav-link {
			padding: 10px 10px;
		}
		.nav-tabs .nav-link {
			color: #ffffff;
			font-size: 12px;
			text-align: center;
			letter-spacing: 1px;
			font-weight: 600;
			margin: 12px;
			border-radius: 4px;
			padding: 12px 20px;
			text-transform: uppercase;
			border: 0px solid transparent;
		}
		a {
			outline: none!important;
			color: #3b5998;
		}
		.h5, h5 {
			font-size: 18px;
			line-height: 22px;
		}
		.h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6 {
			font-weight: 600;
			color: #000;
		}
	</style>
</head>

<body>
<!-- Start wrapper-->
<div id="wrapper" >
	<!--引入topbar！！！-->
	<div th:replace="~{commons/bar::topbar}"></div>
	<div class="container-fluid">
		<div class="row">
			<!--引入sidebar,并设置一个参数使他高亮显示-->
			<div th:replace="~{commons/bar::#sidebar(activeUri='personalInfo.html')}"></div>
			<main role="main">
				<div class="content-wrapper">
					<div class="container-fluid">
						<!-- Breadcrumb-->
						<div class="row pt-2 pb-2">
							<div class="col-sm-12">
								<h4>用户个人信息</h4>
								<ol class="breadcrumb" style="background-color: #f6f9fc;">
									<li class="breadcrumb-item"><a th:href="@{/shopping/goshoppingbypage}" >校园二手商品交易中心</a></li>
									<li class="breadcrumb-item active" aria-current="page">用户信息</li>
								</ol>
							</div>
							<div class="row">
								<div class="col-lg-4" >
									<div class="card profile-card-2">
										<div class="card-img-block">
											<img class="img-fluid" src="/asserts/img/12.jpg" alt="Card image cap">
										</div>
										<div class="card-body pt-5">
											<img src="/asserts/img/touxiang.jpg" alt="profile-image" class="profile">
											<label style="font-size: 25px;" class="card-title" th:text="${customer.uname}"></label>
											<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
											<div class="icon-block">
												<a href="javascript:void();"><i class="fa fa-facebook bg-facebook text-white"></i></a>
												<a href="javascript:void();"> <i class="fa fa-twitter bg-twitter text-white"></i></a>
												<a href="javascript:void();"> <i class="fa fa-google-plus bg-google-plus text-white"></i></a>
											</div>
										</div>
									</div>

								</div>

								<div class="col-lg-8">
									<div class="card">
										<div class="card-body">
											<ul class="nav nav-tabs bg-facebook shadow-facebook nav-justified">
												<li class="nav-item">
													<a href="javascript:void();" data-target="#profile" data-toggle="pill" class="nav-link active show"><i class="icon-user"></i> <span class="hidden-xs">个人简介</span></a>
												</li>
												<li class="nav-item">
													<a href="javascript:void();" data-target="#messages" data-toggle="pill" class="nav-link"><i class="icon-envelope-open"></i> <span class="hidden-xs">近期留言</span></a>
												</li>
												<li class="nav-item">
													<a href="javascript:void();" data-target="#edit" data-toggle="pill" class="nav-link"><i class="icon-note"></i> <span class="hidden-xs">编辑</span></a>
												</li>
											</ul>
											<div class="tab-content p-3">
												<div class="tab-pane active show" id="profile">
													<h5 class="mb-3">用户个人信息</h5>
													<div class="row">
														<div class="col-md-6">
															<h6>账户：</h6>
															<label th:text="${customer.account}">
															</label>
															<h6>地址：</h6>
															<label th:text="${customer.address}">
															</label>
															<h6>电话：</h6>
															<label th:text="${customer.tel}">
															</label>
															<h6>邮编：</h6>
															<label th:text="${customer.zipCode}">
															</label>
														</div>
														<div class="col-md-6">
															<h6>近期标识</h6>
															<a href="javascript:void();" class="badge badge-dark badge-pill">html5</a>
															<a href="javascript:void();" class="badge badge-dark badge-pill">react</a>
															<a href="javascript:void();" class="badge badge-dark badge-pill">codeply</a>
															<a href="javascript:void();" class="badge badge-dark badge-pill">angularjs</a>
															<a href="javascript:void();" class="badge badge-dark badge-pill">css3</a>
															<a href="javascript:void();" class="badge badge-dark badge-pill">jquery</a>
															<a href="javascript:void();" class="badge badge-dark badge-pill">bootstrap</a>
															<a href="javascript:void();" class="badge badge-dark badge-pill">responsive-design</a>
															<hr>
															<span class="badge badge-primary"><i class="fa fa-user"></i> 900 Followers</span>
															<span class="badge badge-success"><i class="fa fa-cog"></i> 43 Forks</span>
															<span class="badge badge-danger"><i class="fa fa-eye"></i> 245 Views</span>
														</div>
														<div class="col-md-12">
															<h5 class="mt-2 mb-3" style="color: red"><span class="fa fa-clock-o ion-clock float-right" ></span>系统推荐</h5>
															<div class="table-responsive">
																<table class="table table-hover table-striped">
																	<tbody>
																	<tr th:each="commodity:${pageInfoEx.list}">
																		<td>
																			<span th:text="${commodity.date}"></span>
																			<span th:text="' , 用户：'"></span>
																			<a style="font-weight: bold" th:text="${customer.uname}"></a>上新了
																			<label style="font-weight: bold" th:text="${commodity.count}"></label>个
																			<a href="#" th:text="'《' + ${commodity.name} + '》'"></a>
																		</td>
																	</tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
													<!--/row-->
												</div>

												<div class="tab-pane" id="messages">
													<div class="alert alert-info alert-dismissible" role="alert">
														<button type="button" class="close" data-dismiss="alert">×</button>
														<div class="alert-icon">
															<i class="icon-info"></i>
														</div>
														<div class="alert-message">
															<span><strong>消息!</strong> 有用户给你留言。</span>
														</div>
													</div>
													<div class="table-responsive">
														<table class="table table-hover table-striped">
															<tr th:each="content:${pageInfo.list}">
																<td style="text-align: left" >
																	<span th:text="${content.updateTime}"></span>
																	<span th:text="' , 顾客：@'"></span>
																	<a th:text="${content.uname}" href="#"></a>
																	<span th:text=" '，给你的商品：《 '"></span>
																	<a href="#" th:text="${content.pname}" class="modelimg" th:id="${content.pid}"></a>
																	<span th:text="' 》留言说： ' + ${content.content}"></span>
																</td>
															</tr>
														</table>
													</div>
													<footer class="text-muted" style="text-align: right">
														<div class="container">
															<div  class="float-right">
																<nav aria-label="..." id="page_nav_area">
																	<ul class="pagination">

																	</ul>
																</nav>
															</div>
														</div>
														<!--用于保存要连续显示的页数-->
														<div th:each="paging:${pageInfo.navigatepageNums}">
															<p th:id="${paging}" th:name="${paging}" class="myPaging"></p>
															<input type="hidden" th:name="${pageInfo.pageNum}" th:id="currentPage">
															<input type="hidden" th:id="allPages" th:name="${pageInfo.pages}">
														</div>
													</footer>
												</div>
												<!--标签页：编辑-->
												<div class="tab-pane" id="edit">
													<form method="post" action="/user/modifyPersonalInfo">
														<div class="form-group row">
															<label class="col-lg-3 col-form-label form-control-label">用户姓名：</label>
															<div class="col-lg-9">
																<input type="text" th:value="${customer.uname}" class="form-control" name="uname" >
															</div>
														</div>
														<div class="form-group row">
															<label class="col-lg-3 col-form-label form-control-label">联系电话：</label>
															<div class="col-lg-9">
																<input type="text" th:value="${customer.tel}" maxlength="11"  class="form-control" name="tel" ></td>
															</div>
														</div>
														<div class="form-group row">
															<label class="col-lg-3 col-form-label form-control-label">登录账号：</label>
															<div class="col-lg-9">
																<input type="text" th:value="${customer.account}" class="form-control" name="account" >
															</div>
														</div>
														<div class="form-group row">
															<label class="col-lg-3 col-form-label form-control-label">登录密码：</label>
															<div class="col-lg-9">
																<input type="password" th:value="${customer.password}" class="form-control" name="password">
															</div>
														</div>
														<div class="form-group row">
															<label class="col-lg-3 col-form-label form-control-label">居住地址：</label>
															<div class="col-lg-9">
																<input type="text" th:value="${customer.address}" class="form-control" name="address" >
															</div>
														</div>
														<div class="form-group row">
															<label class="col-lg-3 col-form-label form-control-label">住址邮编：</label>
															<div class="col-lg-9">
																<input type="text" th:value="${customer.zipCode}" class="form-control" name="zipCode" >
															</div>
														</div>
														<div class="form-group row">
															<label class="col-lg-3 col-form-label form-control-label"></label>
															<div class="col-lg-9">
																<input type="reset" class="btn btn-secondary" value="取消">
																<input type="submit" class="btn btn-primary" value="确认修改">
															</div>
														</div>
													</form>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>

	<!--模态框-->
	<div id="myModel">
		<div class="modal fade emp-add-modal" tabindex="-1" role="dialog" >
			<div class="modal-dialog" role="document">
				<div class="modal-body">
					<div class="card mb-4 shadow-sm">
						<div class="card-body" th:id="mymodel">

						</div>

					</div><!-- /.modal-content -->
				</div><!-- /.modal-dialog -->
			</div>
		</div>
	</div>
	<script type="text/javascript" src="asserts/js/jquery-3.3.1.min.js" th:src="@{/asserts/js/jquery-3.3.1.min.js}" ></script>
	<script type="text/javascript" src="asserts/js/popper.min.js" th:src="@{/asserts/js/popper.min.js}"></script>
	<script type="text/javascript" src="asserts/js/bootstrap.min.js" th:src="@{/asserts/js/bootstrap.min.js}"></script>
	<!-- simplebar js -->
	<script type="text/javascript" th:src="@{/asserts/js/simplebar.js}"></script>
	<!-- sidebar-menu js -->
	<script type="text/javascript" th:src="@{/asserts/js/sidebar-menu.js}"></script>
	<!-- Custom scripts -->
	<script type="text/javascript" th:src="@{/asserts/js/app-script.js}"></script>
	<!--引入自定义的js文件-->
	<script language = "javascript" th:src = "@{/asserts/js/myjs.js}"></script>
	<script>
        $(function () {
            //使用模态框
            $(".modelimg").click(function () {
                var temp = $(this).attr("id");
                $.ajax({
                    url:"/user/viewcommoditydetail/" + temp,
                    type:"GET",
                    success:function (result) {
                        $("#mymodel").empty();
                        if (result != null){
                            var img;
                            if(result.photo != null){
                                img = $("<img>").attr("src",'/images/'+ result.photo).attr("style","text-align: center");
                            }else {
                                img = $("<img>").attr("src","/images/nophotos.jpg").attr("style","text-align: center");
                            }
                            $("#mymodel").append("<p></p>").append(img);
                            $("#mymodel").append("<p></p>").append("商品编号： " + result.pid);
                            $("#mymodel").append("<p></p>").append("商品名称： " + result.name);
                            $("#mymodel").append("<p></p>").append("发布日期： " + result.date);
                            $("#mymodel").append("<p></p>").append("商品价格： " + result.price);
                            $("#mymodel").append("<p></p>").append("商品发布者： " + result.authorId);
                            $("#mymodel").append("<p></p>").append("商品数量： " + result.count);
                            $("#mymodel").append("<p></p>").append("商品介绍： " + result.note);
                            $("#mymodel").append("<p></p>");
                            var div = $("<div></div>").attr("class","modal-footer");
                            var btn = $("<button>关闭</button>").attr("type","button").attr("class","btn btn-default").attr("data-dismiss","modal");
                            div.append(btn);
                            $("#mymodel").append(div);
                        }
                    }
                });
                $('.emp-add-modal').modal({
					/*backdrop:"static",*/
                    keyboard:true
                });
            });

            //删除一条评论
            $('.btn.btn-sm.btn-outline-secondary.removecontent').click(function () {
                var cid = $(this).attr("id");
                window.location.href = "/user/removecontent/" + cid;
            });

            //清空评论
            $('btn.btn-danger.removeallcontent').click(function () {
                window.location.href = "/user/removeallcontent";
            });

            //解析显示分页条
            parsingPaginatioBarForPersonalInfo();

            //搜索商品
            searchCommodity();

        });
	</script>
</div>
</body>
</html>